<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forum | EcoFindr</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <img src="Outlook-A-logo-of.jpg" alt="EcoFindr Logo" class="logo">
        <h1>Forum</h1>
    </header>
    <div id="forum-container">
        <textarea id="question" placeholder="Ask a question..." required></textarea>
        <button onclick="submitQuestion()">Post Question</button>
        <div id="questions-list">
            <!-- List of questions will appear here -->
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>
    <script>
        const db = firebase.firestore();

        function submitQuestion() {
            const question = document.getElementById("question").value;
            db.collection("questions").add({
                question: question,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                document.getElementById("question").value = ''; // Clear the textarea
                loadQuestions();
            })
            .catch(error => alert(error.message));
        }

        function loadQuestions() {
            db.collection("questions").orderBy("timestamp", "desc").get()
                .then((querySnapshot) => {
                    const questions = querySnapshot.docs.map(doc => `<p>${doc.data().question}</p>`).join('');
                    document.getElementById("questions-list").innerHTML = questions;
                });
        }

        loadQuestions();
    </script>
</body>
</html>
